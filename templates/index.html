<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Витрати</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='mainpage.css') }}">
</head>

<body>
    <h1> Витрати користувача {{ username }}</h1>
    <a href="{{ url_for('add') }}"> Додати</a>
    <a href="{{ url_for('category') }}"> По категорії</a>
    <a href="{{ url_for('logout') }}"> Вихід</a>


    <h2> Список витрат</h2>
    <ul class="expenses-list">
        {% for e in expenses %}
        <li>
            <span class="date">{{ e.date }}</span>
            <span class="amount">{{ e.amount }} грн</span>
            <span class="category" data-category="{{ e.category | e }}">{{ e.category }}</span>
        </li>
        {% else %}
        <li class="empty">Немає витрат</li>
        {% endfor %}
    </ul>


    <div class="container">
        <div class="graphic">
            <h2> Графік витрат за категоріями</h2>
            <!-- Зменшений статичний графік -->
            <canvas id="expensesChart" width="450" height="auto"></canvas>
        </div>

        <div class="analyze">
            <h2> Аналіз витрат</h2>
            <!-- Зменшений статичний графік -->
            <p>dsad</p>
        </div>

    </div>
    {% if not statusMessage %}
    <div class="form-container">
        <h1>Вкажіть ваші дані</h1>
        <form method="POST" action="/">
            <label for="age">Ваш вік:</label>
            <input type="number" id="age" name="age" min="1" max="120" required>

            <label for="country">Ваша країна:</label>
            <select id="country" name="country" required>
                <option value="">Оберіть країну</option>
                <option value="Україна">Україна</option>
                <option value="Польща">Польща</option>
                <option value="Німеччина">Німеччина</option>
                <option value="США">США</option>
                <option value="Інша">Інша</option>
            </select>

            <button type="submit">Надіслати</button>
        </form>

    </div>
    {% endif %}
    
    {% if message %}
    <div class="message">{{ message }}</div>
    {% endif %}

    <script src="/static/categories.js"></script>
    <script src="/static/graph.js"> </script>
</body>

</html>